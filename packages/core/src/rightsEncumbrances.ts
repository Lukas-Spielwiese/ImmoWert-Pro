import { CalcResult } from './types';
export interface RechteInput { niessbrauch?: boolean; wohnrecht?: boolean; leitungsWeg?: boolean; erbbau?: { erbbauzins: number; restlaufzeit: number; zins: number }; }
export function rechteBewertung({ ausgangswert, rechte }:{ ausgangswert: number; rechte: RechteInput; }): CalcResult { let wert = ausgangswert; const prot: { label: string; value: string }[] = [{ label: 'Ausgangswert', value: ausgangswert.toFixed(2) }]; let minderQuote = 0; if (rechte.niessbrauch) minderQuote += 0.05; if (rechte.wohnrecht) minderQuote += 0.05; if (rechte.leitungsWeg) minderQuote += 0.05; if (minderQuote > 0) { const abzug = ausgangswert * minderQuote; wert -= abzug; prot.push({ label: 'Minderungen (Dienstbarkeiten §46ff.)', value: `-${abzug.toFixed(2)}` }); } if (rechte.erbbau) { const { erbbauzins, restlaufzeit, zins } = rechte.erbbau; const r = zins / 100; const barwert = erbbauzins * (1 - Math.pow(1 + r, -restlaufzeit)) / r; wert -= barwert; prot.push({ label: 'Kapitalwert Erbbauzins (§§49–52)', value: `-${barwert.toFixed(2)}` }); } prot.push({ label: 'Wert nach Rechten/Belastungen', value: wert.toFixed(2) }); return { wert, protokoll: prot }; }
